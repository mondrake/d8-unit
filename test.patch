diff --git a/core/lib/Drupal/Component/Diff/Diff.php b/core/lib/Drupal/Component/Diff/Diff.php
index 289bab5f0e..5534968645 100644
--- a/core/lib/Drupal/Component/Diff/Diff.php
+++ b/core/lib/Drupal/Component/Diff/Diff.php
@@ -3,6 +3,12 @@
 namespace Drupal\Component\Diff;
 
 use Drupal\Component\Diff\Engine\DiffEngine;
+use Drupal\Component\Diff\Engine\DiffOpAdd;
+use Drupal\Component\Diff\Engine\DiffOpChange;
+use Drupal\Component\Diff\Engine\DiffOpCopy;
+use Drupal\Component\Diff\Engine\DiffOpDelete;
+use SebastianBergmann\Diff\Differ;
+use SebastianBergmann\Diff\Output\UnifiedDiffOutputBuilder;
 
 /**
  * Class representing a 'diff' between two sequences of strings.
@@ -36,9 +42,22 @@ class Diff {
   public function __construct($from_lines, $to_lines) {
     $eng = new DiffEngine();
     $this->edits = $eng->diff($from_lines, $to_lines);
+dump([$from_lines, $to_lines, $this->edits]);
+    $differ = new Differ(new UnifiedDiffOutputBuilder());
+dump($this->toDiffOps($differ->diffToArray($from_lines, $to_lines)));
     //$this->_check($from_lines, $to_lines);
   }
 
+  private function toDiffOps(array $diffArray): array {
+    $ops = [];
+    for ($i = 0; $i < count($diffArray); $i++) {
+      if ($diffArray[$i][1] === Differ::OLD) {
+        $ops[] = new DiffOpCopy([$diffArray[$i][0]]);
+      }
+    }
+    return $ops;
+  }
+
   /**
    * Compute reversed Diff.
    *
@@ -50,6 +69,7 @@ public function __construct($from_lines, $to_lines) {
    *   A Diff object representing the inverse of the original diff.
    */
   public function reverse() {
+    @trigger_error(__METHOD__ . '() is deprecated in drupal:10.0.0 and is removed from drupal:11.0.0. There is no replacement. See https://www.drupal.org/node/7654321', E_USER_DEPRECATED);
     $rev = $this;
     $rev->edits = [];
     foreach ($this->edits as $edit) {
@@ -64,6 +84,7 @@ public function reverse() {
    * @return bool True iff two sequences were identical.
    */
   public function isEmpty() {
+    @trigger_error(__METHOD__ . '() is deprecated in drupal:10.0.0 and is removed from drupal:11.0.0. There is no replacement. See https://www.drupal.org/node/7654321', E_USER_DEPRECATED);
     foreach ($this->edits as $edit) {
       if ($edit->type != 'copy') {
         return FALSE;
@@ -80,6 +101,7 @@ public function isEmpty() {
    * @return int The length of the LCS.
    */
   public function lcs() {
+    @trigger_error(__METHOD__ . '() is deprecated in drupal:10.0.0 and is removed from drupal:11.0.0. There is no replacement. See https://www.drupal.org/node/7654321', E_USER_DEPRECATED);
     $lcs = 0;
     foreach ($this->edits as $edit) {
       if ($edit->type == 'copy') {
@@ -98,6 +120,7 @@ public function lcs() {
    * @return array The original sequence of strings.
    */
   public function orig() {
+    @trigger_error(__METHOD__ . '() is deprecated in drupal:10.0.0 and is removed from drupal:11.0.0. There is no replacement. See https://www.drupal.org/node/7654321', E_USER_DEPRECATED);
     $lines = [];
 
     foreach ($this->edits as $edit) {
@@ -117,6 +140,7 @@ public function orig() {
    * @return array The sequence of strings.
    */
   public function closing() {
+    @trigger_error(__METHOD__ . '() is deprecated in drupal:10.0.0 and is removed from drupal:11.0.0. There is no replacement. See https://www.drupal.org/node/7654321', E_USER_DEPRECATED);
     $lines = [];
 
     foreach ($this->edits as $edit) {
@@ -133,6 +157,7 @@ public function closing() {
    * This is here only for debugging purposes.
    */
   public function check($from_lines, $to_lines) {
+    @trigger_error(__METHOD__ . '() is deprecated in drupal:10.0.0 and is removed from drupal:11.0.0. There is no replacement. See https://www.drupal.org/node/7654321', E_USER_DEPRECATED);
     if (serialize($from_lines) != serialize($this->orig())) {
       trigger_error("Reconstructed original doesn't match", E_USER_ERROR);
     }
diff --git a/core/lib/Drupal/Component/Diff/Engine/DiffEngine.php b/core/lib/Drupal/Component/Diff/Engine/DiffEngine.php
index f8ec05fbbb..6aba157acb 100644
--- a/core/lib/Drupal/Component/Diff/Engine/DiffEngine.php
+++ b/core/lib/Drupal/Component/Diff/Engine/DiffEngine.php
@@ -2,6 +2,8 @@
 
 namespace Drupal\Component\Diff\Engine;
 
+@trigger_error('\Drupal\Component\Diff\Engine\DiffEngine is deprecated in drupal:10.0.0 and is removed from drupal:11.0.0. Use SebastianBergmann/diff instead. See https://www.drupal.org/node/7654321', E_USER_DEPRECATED);
+
 /**
  * Class used internally by Diff to actually compute the diffs.
  *
